<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Healthcare â€” Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{
          --primary: #1E3A8A; /* blue */
          --primary-dark: #1E40AF;
          --text-light: #ffffff;
          --card-bg: #ffffff;
          --card-shadow: 0 4px 12px rgba(0,0,0,0.1);
          font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
        }
        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%;}

        header{
          background:var(--primary);
          color:var(--text-light);
          display:flex;
          justify-content:space-between;
          align-items:center;
          padding:15px 30px;
        }
        .logo{font-weight:700;font-size:1.5rem;}
        nav ul{display:flex;list-style:none;gap:20px;}
        nav a{color:var(--text-light);text-decoration:none;font-weight:600;}
        nav a:hover{opacity:0.8}

        .hero{
          height:35vh;
          background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 100%);
          display:flex;
          align-items:center;
          justify-content:center;
          color:white;
          text-align: center;
        }

        main{padding:20px;}
        #content h2{margin-bottom:15px;color:var(--primary-dark)}

        /* Doctors grid layout */
        .doctorEntities-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
          gap: 20px;
          margin-top: 20px;
        }

        .doctorEntity-card {
          background: var(--card-bg);
          border-radius: 12px;
          box-shadow: var(--card-shadow);
          padding: 20px;
          transition: transform 0.3s ease;
        }

        .doctorEntity-card:hover {
          transform: translateY(-5px);
        }

        .doctorEntity-image {
          width: 100px;
          height: 100px;
          border-radius: 50%;
          object-fit: cover;
          margin: 0 auto 15px;
          display: block;
          border: 3px solid #e0e7ff;
        }

        .doctorEntity-name {
          font-size: 1.2rem;
          font-weight: 600;
          color: var(--primary);
          text-align: center;
          margin-bottom: 5px;
        }

        .doctorEntity-specialty {
          color: #64748B;
          text-align: center;
          margin-bottom: 15px;
          font-style: italic;
        }

        .doctorEntity-details {
          margin-top: 15px;
          border-top: 1px solid #e2e8f0;
          padding-top: 15px;
        }

        .doctorEntity-detail {
          display: flex;
          margin-bottom: 12px;
          font-size: 0.9rem;
          line-height: 1.4;
        }

        .doctorEntity-detail strong {
          min-width: 90px;
          color: #475569;
        }

        footer{background:#e0e7ff;color:#1e3a8a;text-align:center;padding:15px;margin-top:20px;}

        .loading {
          text-align: center;
          padding: 20px;
          color: #64748B;
        }

        .error {
          color: #EF4444;
          padding: 20px;
          text-align: center;
        }
    </style>
</head>
<body>

<header>
    <div class="logo">Healthcare</div>
    <nav>
        <ul>
            <li><a href="#" onclick="showHome()">Home</a></li>
            <li><a href="#" onclick="loadDoctors()">Doctors</a></li>
            <li><a href="#" onclick="loadServices()">Services</a></li>
            <li><a href="#" onclick="loadContact()">Contact</a></li>
        </ul>
    </nav>
</header>

<div class="hero">
    <div>
        <h1>Welcome to Healthcare</h1>
        <p>Your health is our priority</p>
    </div>
</div>

<main>
    <div id="content">
        <!-- Dynamic content will be loaded here -->
    </div>
</main>

<footer>
    &copy; <span id="year"></span> Healthcare. All rights reserved.
</footer>

<script>
    document.getElementById('year').textContent = new Date().getFullYear();

    function showHome(){
      document.getElementById('content').innerHTML = `
        <h2>Welcome to Our Healthcare Portal</h2>
        <p>We provide comprehensive healthcare services with a team of experienced professionals.
        Use the navigation menu to explore our doctors, services, and contact information.</p>
      `;
    }

    async function loadDoctors(){
        document.getElementById('content').innerHTML = `
            <h2>Our Doctors</h2>
            <div class="loading">Loading doctors...</div>
        `;

        try {
            const response = await fetch('http://localhost:8080/healthcare/api/doctors');
            const doctors = await response.json();

            let doctorsHTML = `
                <h2>Our Doctors</h2>
                <div class="doctorEntities-grid">
            `;

            for (const doctor of doctors) {
                // Get specialization name
                let specializationName = 'General Practitioner';
                if (doctor.specializationId) {
                    try {
                        const specResp = await fetch(`http://localhost:8080/healthcare/api/specializations/${doctor.specializationId}`);
                        if (specResp.ok) {
                            const specData = await specResp.json();
                            specializationName = specData.name || specializationName;
                        }
                    } catch(e) {
                        console.warn('Failed to load specialization for doctor', doctor.id, e);
                    }
                }

                let imageSrc = 'https://via.placeholder.com/100?text=No+Image';
                if (doctor.photo && doctor.photo.length > 0) {
                    const mimeType = doctor.photo.startsWith('iVBOR') ? 'image/png' : 'image/jpeg';
                    imageSrc = `data:${mimeType};base64,${doctor.photo}`;
                }

                doctorsHTML += `
                    <div class="doctorEntity-card">
                        <img src="${imageSrc}" alt="${doctor.firstName} ${doctor.lastName}" class="doctorEntity-image">
                        <h3 class="doctorEntity-name">${doctor.firstName} ${doctor.lastName}</h3>
                        <p class="doctorEntity-specialty">${specializationName}</p>

                        <div class="doctorEntity-details">
                            <div class="doctorEntity-detail">
                                <strong>Email:</strong> ${doctor.email || 'N/A'}
                            </div>
                            <div class="doctorEntity-detail">
                                <strong>Phone:</strong> ${doctor.phone || 'N/A'}
                            </div>
                            <div class="doctorEntity-detail">
                                <strong>Specialty:</strong> ${specializationName}
                            </div>
                        </div>
                    </div>
                `;
            }

            doctorsHTML += `</div>`;
            document.getElementById('content').innerHTML = doctorsHTML;

        } catch(error) {
            console.error('Error loading doctors:', error);
            document.getElementById('content').innerHTML = `
                <h2>Our Doctors</h2>
                <div class="error">Error loading doctors. Please try again later.</div>
            `;
        }
    }

    function loadServices(){
      document.getElementById('content').innerHTML = '<h2>Services</h2><p>Services information will be displayed here.</p>';
    }

    function loadContact(){
      document.getElementById('content').innerHTML = '<h2>Contact</h2><p>Contact information will be displayed here.</p>';
    }

    // Default view
    showHome();
</script>

</body>
</html>
